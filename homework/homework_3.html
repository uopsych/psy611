<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="YOUR NAME HERE">

<title>PSY 611 Homework #3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="homework_3_files/libs/clipboard/clipboard.min.js"></script>
<script src="homework_3_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="homework_3_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="homework_3_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="homework_3_files/libs/quarto-html/popper.min.js"></script>
<script src="homework_3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="homework_3_files/libs/quarto-html/anchor.min.js"></script>
<link href="homework_3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="homework_3_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="homework_3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="homework_3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="homework_3_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PSY 611 Homework #3</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>YOUR NAME HERE </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="instructions" class="level1">
<h1>Instructions</h1>
<p>Please complete this assignment using the RMarkdown file provided. Once you download the RMarkdown file please (1) include your name in the preamble, (2) rename the file to include your last name (e.g., “weston-homework-3.Rmd”). When you turn in the assignment, include both the .Rmd and knitted .html files.</p>
<p>To receive full credit on this homework assignment, you must earn <strong>30 points</strong>. You may notice that the total number of points available to earn on this assignment is 65 – this means you do not have to answer all of the questions. You may choose which questions to answer. You cannot earn more than 30 points, but it may be worth attempting many questions. Here are a couple things to keep in mind:</p>
<ol type="1">
<li><p>Points are all-or-nothing, meaning you cannot receive partial credit if you correctly answer only some of the bullet points for a question. All must be answered correctly.</p></li>
<li><p>After the homework has been graded, you may retry questions to earn full credit, but you may only retry the questions you attempted on the first round.</p></li>
<li><p>The first time you complete this assignment, it must be turned in by 9am on the due date (December 8). Late assignments will receive 50% of the points earned. For example, if you correctly answer questions totaling 28 points, the assignment will receive 14 points. If you resubmit this assignment with corrected answers (a total of 30 points), the assignment will receive 15 points.</p></li>
<li><p>You may discuss homework assignments with your classmates; however, it is important that you complete each assignment on your own and do not simply copy someone else’s code. If we believe one student has copied another’s work, both students will receive a 0 on the homework assignment and will not be allowed to resubmit the assignment for points.</p></li>
</ol>
<p><strong>A helpful note:</strong> I recommend using the tidyverse function <code>read_csv()</code>to load datasets, not the base-R function <code>read.csv()</code>. I have found that this results in fewer weird table-problems.</p>
<p><strong>Data:</strong> Some of the questions in this assignment use the dataset referred to as <code>homework-school</code>. This is a sample of Oregon students collected through the <a href="https://ww2.amstat.org/censusatschool/index.cfm">Census at School</a> project. Non-numeric responses to numeric questions (e.g., “a lot” as a response to “How many hours per week do you text your friends?”) have been removed, but no other cleaning has been done. Be warned: missing values and implausible (and impossible) responses abound.</p>
<p>Other questions refer to the dataset <code>homework-nls</code> that contains the following variables from the National Longitudinal Survey of Youth 1997, collected in 2000 and 2010:</p>
<ul>
<li><code>sex</code></li>
<li><code>calm_2000</code></li>
<li><code>blue_2000</code></li>
<li><code>happy_2000</code></li>
<li><code>depressed_2000</code></li>
<li><code>calm_2010</code></li>
<li><code>blue_2010</code></li>
<li><code>happy_2010</code></li>
<li><code>depressed_2010</code></li>
</ul>
<p>Finally, we return once again to the <a href="http://www.gallup.com/178667/gallup-world-poll-work.aspx">World Happiness Survey</a>, an attempt to track important issues in over 160 countries, representing about 99% of the world’s population. A small part of that survey is in the dataset <code>homework-world-2</code>. Included are the country name, country development status (First World, Second World, Third World, or Other), the life ladder score, and a binary happiness variable called Above_Average.</p>
</section>
<section id="point-questions" class="level1">
<h1>2-point questions</h1>
<section id="P2Q1" class="level3">
<h3 class="anchored" data-anchor-id="P2Q1">Question 1</h3>
<p>A <a href="https://link.springer.com/article/10.1007/s11606-018-4610-8">recent study</a> collected data from 5,038 participants and found that the average body temperature was 97.7 degrees F <span class="math inline">\((SD = 0.72)\)</span>. Is this significantly different from our <a href="https://www.wired.com/story/98-degrees-is-a-normal-body-temperature-right-not-quite/">previous benchmark for normal body temperature</a>, 98.6?</p>
</section>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question 2</h3>
<p>Calculate the effect size for the previous question.</p>
</section>
<section id="question-3" class="level3">
<h3 class="anchored" data-anchor-id="question-3">Question 3</h3>
<p>At a conference, you attend a talk about the effectiveness of a DBT therapy intervention on anxiety. The presenter puts up the figure below. The presenter claims that these groups are significantly different from one another, because the experimental group shows significantly lower anxiety than the clinical threshold, but the control group does not. Do you agree with thee presenter? Explain your answer.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">group =</span> <span class="fu">c</span>(<span class="st">"control"</span>, <span class="st">"DBT"</span>),</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">xbar =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">5</span>),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">s =</span> <span class="fu">c</span>(<span class="fl">2.3</span>, <span class="fl">2.4</span>), </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">N =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">se =</span> s<span class="sc">/</span><span class="fu">sqrt</span>(N),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cv =</span> <span class="fu">qt</span>(<span class="at">p =</span> .<span class="dv">975</span>, <span class="at">df =</span> N<span class="dv">-1</span>),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">moe =</span> se<span class="sc">*</span>cv) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> group, <span class="at">y =</span> xbar, <span class="at">color =</span> group)) <span class="sc">+</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">9</span>), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> xbar<span class="sc">-</span>moe, <span class="at">ymax =</span> xbar<span class="sc">+</span>moe), <span class="at">width =</span> .<span class="dv">8</span>)<span class="sc">+</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">'none'</span>)<span class="sc">+</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Anxiety levels"</span>, </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Anxiety levels by group"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Bars represent 95% confidence intervals. </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="st">       The dashed horizontal line represents the clinical threshold for anxiety disorders."</span>)<span class="sc">+</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="homework_3_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="question-4" class="level3">
<h3 class="anchored" data-anchor-id="question-4">Question 4</h3>
<p>Daylight in Eugene winter is a precious commodity. You believe that undergraduates who live on the top floor of their dorm or apartment building are getting more sun (and more of that sweet, sweet Vitamin D) than students living on the bottom floors. You measure the amount of vitamin D in undergraduates blood streams and record the averages by where students live.</p>
<p><span class="math inline">\(\hat{\mu}_{\text{TopFloor}}\)</span> = 31 ng/mL</p>
<p><span class="math inline">\(\hat{\mu}_{\text{BottomFloor}}\)</span> = 26 ng/mL</p>
<p><span class="math inline">\(\hat{\sigma}_{\text{TopFloor}}\)</span> = 7.4 ng/mL</p>
<p><span class="math inline">\(\hat{\sigma}_{\text{BottomFloor}}\)</span> = 8.3 ng/mL</p>
<p><span class="math inline">\(n_{\text{TopFloor}}\)</span> = 20</p>
<p><span class="math inline">\(n_{\text{BottomFloor}}\)</span> = 23</p>
<ul>
<li><p>Calculate the <em>t</em>-statistic for the difference between the two means. Assume the variances of the two groups are equal.</p></li>
<li><p>Is the difference between the two means significant? Use <span class="math inline">\(\alpha = .05\)</span> and a two-tailed test. (Don’t forget to calculate the degrees of freedom.)</p></li>
</ul>
</section>
<section id="question-5" class="level3">
<h3 class="anchored" data-anchor-id="question-5">Question 5</h3>
<p>Your collaborator thinks there’s a better way to test this question. He conducts a longitudinal study on bottom-floor residents, measuring blood Vitamin D levels one year, and then measures them again if they move to a the top floor the next year. Overall, he manages to measure Vitamin D twice in a group of 16 bottom-then-top floor residents.</p>
<p><span class="math inline">\(\hat{\mu}_{\text{TopFloor}}\)</span> = 31 ng/mL</p>
<p><span class="math inline">\(\hat{\mu}_{\text{BottomFloor}}\)</span> = 26 ng/mL</p>
<p><span class="math inline">\(\hat{\sigma}_{\text{TopFloor}}\)</span> = 7.4 ng/mL</p>
<p><span class="math inline">\(\hat{\sigma}_{\text{BottomFloor}}\)</span> = 8.3 ng/mL</p>
<p><span class="math inline">\(n_{\text{TopFloor}}\)</span> = 16</p>
<p><span class="math inline">\(r_{\text{TopFloor,BottomFloor}}\)</span> = 0.78</p>
<ul>
<li><p>Calculate the <em>t</em>-statistic for the difference between the two means.</p></li>
<li><p>Is the difference between the two means significant? Use <span class="math inline">\(\alpha = .05\)</span> and a two-tailed test. (Don’t forget to calculate the degrees of freedom.)</p></li>
<li><p>Do you agree that this way is better? What are the advantages and disadvantages of your collaborator’s method?</p></li>
</ul>
</section>
</section>
<section id="point-questions-1" class="level1">
<h1>5-point questions</h1>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question 1</h3>
<p>The Census at School database includes the following question:</p>
<p><em>Which would you prefer to be? Select one: Rich, Happy, Famous, Healthy</em></p>
<p>Use the <code>homework-school</code> dataset as your sample. The relevant variable in this dataset is called <code>Preferred_Status</code>. Use this data set to answer the following questions.</p>
<ul>
<li><p>How many students preferred each of these categories?</p></li>
<li><p>Nationally, 6% of students would prefer to be famous, 30% would prefer to be happy, 35% would prefer to be healthy, and 29% would prefer to be rich. You decide to use a statistical test to compare the Oregon student sample to the USA proportions. What kind of test will you use? Justify your choice.</p></li>
<li><p>What are your null and alternative hypotheses?</p></li>
<li><p>What is/are the parameter(s) that define your sampling distribution? What is the critical value on this distribution?</p></li>
<li><p>Calculate your test statistic “by hand” (meaning, don’t use a function that ends in <code>.test</code>).</p></li>
<li><p>How does your test statistic compare to your critical value? What do you conclude?</p></li>
<li><p>Test your calculation by using the appropriate test statistic function in R. Check to make sure you calculated the correct expected values and test statistic.</p></li>
</ul>
</section>
<section id="question-2-1" class="level3">
<h3 class="anchored" data-anchor-id="question-2-1">Question 2</h3>
<p>Use the dataset <code>homework-nls</code> for the following question.</p>
<ul>
<li><p>Create the following four new variables:</p>
<ul>
<li><code>content_2000</code>: average of <code>calm_2000</code> and <code>happy_2000</code></li>
<li><code>sad_2000</code>: average of <code>blue_2000</code> and <code>depressed_2000</code></li>
<li><code>content_2010</code>: average of <code>calm_2010</code> and <code>happy_2010</code></li>
<li><code>sad_2010</code>: average of <code>blue_2010</code> and <code>depressed_2010</code></li>
</ul></li>
<li><p>Variables should not be combined into composites or averages unless they are measuring the same thing. Report the correlations between the measures being averaged above and comment on whether you think there is sufficient evidence to support these averaging operations.</p></li>
<li><p>Conduct the appropriate t-tests to determine if contentedness and sadness changed over time. Report the t-value, p-value, confidence interval, and an effect size for each test.</p></li>
<li><p>Create a graphic or two to visualize these effects.</p></li>
</ul>
</section>
<section id="question-3-1" class="level3">
<h3 class="anchored" data-anchor-id="question-3-1">Question 3</h3>
<p>Use the dataset <code>homework-nls</code> for the following question.</p>
<ul>
<li><p>Create the following two new variables:</p>
<ul>
<li><code>diff_content</code> = <code>content_2010</code>-<code>content_2000</code></li>
<li><code>diff_sad</code> = <code>sad_2010</code>-<code>sad_2000</code></li>
</ul></li>
<li><p>Conduct independent samples t-tests for each measure; use sex as the grouping variable. Report the t-value, p-value, confidence interval, and effect size for each test.</p></li>
<li><p>Conceptually, what kind of effect is being examined with the t-tests in this question?</p></li>
<li><p>Create a single figure to visualize these effects. Be sure to include confidence intervals.</p></li>
</ul>
</section>
</section>
<section id="point-questions-2" class="level1">
<h1>10-point questions</h1>
<section id="question-1-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1-1">Question 1</h3>
<p>The “above average effect” (AAE) describes a curious phenomenon in which most people claim to be above average on most positive attributes—a statistical impossibility. This can manifest itself in a lot of ways, including most people claiming to be smarter than average, better than average leaders, and better than average drivers. All of these, of course, fail the test of daily experience, which tells you that most people drive like idiots, couldn’t lead a hungry man to a steak dinner, and would be no better than even-money to win as a contestant on Jeopardy if competing against a fence post. You’ll test if the AAE manifests itself in the world happiness data that we have examined previously in the course.</p>
<p>In the dataset <code>homework-world-2</code>, the instructions for the <code>Happiness</code> measure were: “Please imagine a ladder, with steps numbered from 0 at the bottom to 10 at the top. The top of the ladder represents the best possible life for you and the bottom of the ladder represents the worst possible life for you. On which step of the ladder would you say you personally feel you stand at this time?”</p>
<p>The variable, <code>Above_Average</code>, is scored 1 if the life ladder score was above 5, the mid-point of the life ladder; otherwise it is scored 0.</p>
<p>Pick one of these measures to test the AAE. (If choosing the ladder, use the value of 5 as the expected happiness value if, in fact, there is no AAE. If using the Above_Average variable, then the value .5 as the expected value if there is no AAE):</p>
<ul>
<li><p>What is the null hypothesis? What is the alternative hypothesis?</p></li>
<li><p>Set your alpha level. Should you conduct a one-tailed test or a two-tailed test?</p></li>
<li><p>Determine the parameters of your sampling distribution. Create a figure of this distribution that includes an indication of the critical value(s).</p></li>
<li><p>Conduct your statistical test and interpret the result in terms of your null and alternative hypothesis.</p></li>
<li><p>The test you have conducted might be criticized for being a bit lenient. After all, some countries in the survey are quite well-off and would have good reasons for reporting higher than average levels of happiness. If the AAE is robust, it should show up even for countries that have less compelling reasons to be happy. Repeat the test but now separately for countries in the four development categories. Report all test statistics and <em>p</em>-values.</p></li>
</ul>
</section>
<section id="question-2-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2-2">Question 2</h3>
<p>The Graduate Coffee Drinkers Association (GCDA) reports that the average graduate student drinks 5 cups of coffee a day and the standard deviation in the population is 1. You suspect that graduate students at the University of Oregon are unusual, in part because of the number of independent coffee roasters in the state and in part because they have to complete quite arduous statistics assignments. You poll 10 of your fellow graduate students and find the average number of cups of coffee consumed is 5.7.</p>
<p>In this problem, you’ll use the concept of power to calculate how many participants are needed in a research study. Assume the true mean of the grad student population is 5.7 (the null hypothesis remains the same), your Type I error rate is .05, and your minimum level of acceptable power is .80. Calculate the needed sample size using three different methods:</p>
<ol type="1">
<li><p>Using the function <code>pwr.norm.test</code> in the <code>pwr</code> package.</p></li>
<li><p>By calculating power at many different sample sizes. Create a figure showing the change in power across sample sizes, and include a straight line at the minimum level of power desired. (One example: the <em>x</em>-axis contains different sample sizes, the <em>y</em>-axis contains different levels of power, and there is a horizontal line at <span class="math inline">\(y = .80\)</span> .)</p></li>
<li><p>Calculate the precise number of participants needed using the formulas provided in class for NHST and power.</p></li>
</ol>
</section>
<section id="question-3-2" class="level3">
<h3 class="anchored" data-anchor-id="question-3-2">Question 3</h3>
<p>Using the <code>homework-world-2.csv</code> dataset, you want to create a specific visualization, but you forgot the ggplot2 syntax. You want a violin plot overlaid with a boxplot (width 0.1) showing <code>Happiness</code> (y-axis) by <code>World</code> (development status, x-axis), and you want each development status to be a different color. Write a natural language prompt to an AI asking it to generate this specific plot code. Be as specific as possible about the dataset variable names. Paste your prompt here.</p>
<p>Paste the code the AI generated and the resulting plot.</p>
<p>AI generated plots often look “default” or slightly cluttered. Ask the AI to make one aesthetic improvement (e.g., “Remove the gray background,” “Add a title,” or “Jitter the raw points on top”). Paste the updated code and the final polished graph.</p>
</section>
</section>
<section id="point-questions-3" class="level1">
<h1>20-point questions</h1>
<section id="question-1-2" class="level3">
<h3 class="anchored" data-anchor-id="question-1-2">Question 1</h3>
<p>In class we discussed the problem of p-hacking, which can arise in quite a number of ways. You will simulate one form of it for this question that appears on the surface to actually be a sound strategy for saving resources.</p>
<p>Imagine that you have done a power analysis to determine the number of participants you will need in a study in which the null hypothesis mean is 50 and the alternative hypothesis mean is 55. The standard deviation is expected to be 10. Your power analysis indicates you will need around 35 participants to have power of .80 for rejecting the null hypothesis at <span class="math inline">\(\alpha = .05\)</span> using a two-tailed t-test. But, a power analysis is just an educated guess and the procedure you will be using in the study is very costly. You would like to get by with fewer participants if you can. So, you start collecting data, adding each case to the data file as you go, and when you get to Participant 5, you decide to start hypothesis testing. As you add each additional participant, you conduct the t-test to see if the mean from the sample collected to that point is significantly different from the null value of 50. After all, if the results are significant with less than 35 participants, why waste additional resources collecting more participants than you need? If the t-test is significant, reject the null and stop the study early. On the other hand, if the t-test is not significant, keep collecting data until you get a significant t-test or you hit your target sample size of 35.</p>
<p>Simulate this scenario 10,000 times. Set a seed (using <code>set.seed</code> at the beginning so I can reproduce your results). For each simulated study, the data should be drawn from a normal distribution, with mean of 50 and standard deviation of 10. In other words, the data will be consistent with the null hypothesis. For each study, tally whether the null hypothesis is rejected, the number of hypothesis tests that are conducted, and the effect size when the study was ended (either prematurely because of a significant t-test or because the planned 35 participants were included). Use Cohen’s d: the difference between the sample mean and the null mean (50) divided by the sample standard deviation. The proportion of rejections over the 10,000 studies is the empirical Type I error rate. We are interested in whether this matches closely the significance level chosen for the t-test (i.e., .05). The average effect size across the 10,000 studies should be close to 0.</p>
<p>One strategy would be to use an outer loop to index the 10,000 studies and an inner loop to index the building up of the sample within a study. Some conditionals will be needed to decide if an interim t- test is significant and whether a test is even conducted (“no” if the sample size is less than 5). You will also need a way to stop a given study and move on to the next one if a t-test is significant. You can use the <code>cohensD( )</code> function from the <code>lsr</code> package to get the effect size or homebrew your own.</p>
<ul>
<li><p>First, determine the empirical Type I error rate for the scenario described above. How does it compare to the significance level of .05 set for the t-test?</p></li>
<li><p>Determine the average effect size for this repeated testing scenario. How does it compare to the expected value given that the null hypothesis is true in this simulation?</p></li>
<li><p>Construct a histogram that shows the number of hypothesis tests conducted for the 10,000 studies.</p></li>
<li><p>Construct a histogram that shows the effect sizes calculated for the 10,000 studies.</p></li>
<li><p>Now modify your code so that just a single t-test is conducted for each study, after all 35 participants are collected. What is the empirical Type I error rate and how does it compare to the significance level chosen for the t-test?</p></li>
<li><p>Comment on the likely consequence of repeatedly testing the hypothesis in the way that was simulated. Can you think of a way that might have the benefits of ending a study early but without the negative impact on the empirical Type I error rate?</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>